        messages = [
            {
                "role": "system",
                "content": "You are a linguist interested in intrinsics of all aspects of language."
            },
            {
                "role": "user",
                "content": [
                    {
                        "type": "text",
                        "text": (
                            f"You are a linguist and OCR expert. Your task is to improve the OCR quality of text while adhering strictly to the following rules. "
                            f"Use the provided image of the original newspaper page (page {page_number}) to guide your corrections.\n\n"
                            f"Improve the OCR quality and normalize the following text to modern Latvian both in metadata and following text"
                            f"so that its meaning resembles the original text in the newspaper as closely as possible. Do not change the text otherwise. "
                            f"Very important: Do not add any interpretations, explanations to text or metadata, information about structure in the output files. "
                            f"Ensure the output is plain text unless otherwise specified. "
                            f"Preserve the line breaks and metadata structure as they are in plaintext provided. Do not merge lines or paragraphs. It is better to have more lines than less. "
                            f"It is better to add empty lines after paragraphs than let them touch or merge. "
                            f"Ensure that output files do not contain any other information that the plaintext provided - it should not include same paragraphs that appears in other files. "
                            f"In metadata, modernize only the content after the colon in metadata lines. "
                            f"Here is the text:\n\n{plaintext}"
                        ),
                    },
                    {
                        "type": "image_url",
                        "image_url": {"url": data_url},
                    },
                ],
            }
        ]

        payload = {
            "model": "google/gemini-2.5-flash-preview",
            "messages": messages,
        }